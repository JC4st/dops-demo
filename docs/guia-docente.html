<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.23">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Guía para Docentes - Evaluación DOPS – DOPS Demo</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-226bd0f977fa82dfae4534cac220d79a.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-2d3a5f678c659c6d9658e8627949fb9f.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Sin resultados",
    "search-matching-documents-text": "documentos encontrados",
    "search-copy-link-title": "Copiar el enlace en la búsqueda",
    "search-hide-matches-text": "Ocultar resultados adicionales",
    "search-more-match-text": "resultado adicional en este documento",
    "search-more-matches-text": "resultados adicionales en este documento",
    "search-clear-button-title": "Borrar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Buscar"
  }
}</script>


</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">DOPS Demo</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Buscar"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Navegación de palanca" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Inicio</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./analisis.html"> 
<span class="menu-text">Análisis</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./guia-docente.html" aria-current="page"> 
<span class="menu-text">Guía Docente</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./guia-estudiante.html"> 
<span class="menu-text">Guía Estudiante</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">Acerca del proyecto</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">En esta página</h2>
   
  <ul class="collapse">
  <li><a href="#introducción" id="toc-introducción" class="nav-link active" data-scroll-target="#introducción"><span class="header-section-number">1</span> Introducción</a></li>
  <li><a href="#evaluación-en-el-lugar-de-trabajo-wba" id="toc-evaluación-en-el-lugar-de-trabajo-wba" class="nav-link" data-scroll-target="#evaluación-en-el-lugar-de-trabajo-wba"><span class="header-section-number">2</span> Evaluación en el Lugar de Trabajo (WBA)</a>
  <ul class="collapse">
  <li><a href="#instrumentos-de-evaluación" id="toc-instrumentos-de-evaluación" class="nav-link" data-scroll-target="#instrumentos-de-evaluación"><span class="header-section-number">2.1</span> Instrumentos de evaluación</a></li>
  </ul></li>
  <li><a href="#qué-es-dops" id="toc-qué-es-dops" class="nav-link" data-scroll-target="#qué-es-dops"><span class="header-section-number">3</span> ¿Qué es DOPS?</a></li>
  <li><a href="#por-qué-usar-dops" id="toc-por-qué-usar-dops" class="nav-link" data-scroll-target="#por-qué-usar-dops"><span class="header-section-number">4</span> ¿Por qué usar DOPS?</a></li>
  <li><a href="#cómo-realizar-una-evaluación-dops" id="toc-cómo-realizar-una-evaluación-dops" class="nav-link" data-scroll-target="#cómo-realizar-una-evaluación-dops"><span class="header-section-number">5</span> ¿Cómo realizar una evaluación DOPS?</a>
  <ul class="collapse">
  <li><a href="#paso-1-accede-a-la-app" id="toc-paso-1-accede-a-la-app" class="nav-link" data-scroll-target="#paso-1-accede-a-la-app"><span class="header-section-number">5.1</span> Paso 1: Accede a la app</a></li>
  <li><a href="#paso-2-selecciona-el-procedimiento-observado" id="toc-paso-2-selecciona-el-procedimiento-observado" class="nav-link" data-scroll-target="#paso-2-selecciona-el-procedimiento-observado"><span class="header-section-number">5.2</span> Paso 2: Selecciona el procedimiento observado</a></li>
  <li><a href="#paso-3-evalúa-cada-dominio" id="toc-paso-3-evalúa-cada-dominio" class="nav-link" data-scroll-target="#paso-3-evalúa-cada-dominio"><span class="header-section-number">5.3</span> Paso 3: Evalúa cada dominio</a></li>
  <li><a href="#paso-4-escribe-observaciones" id="toc-paso-4-escribe-observaciones" class="nav-link" data-scroll-target="#paso-4-escribe-observaciones"><span class="header-section-number">5.4</span> Paso 4: Escribe observaciones</a></li>
  <li><a href="#paso-5-enviar-evaluación" id="toc-paso-5-enviar-evaluación" class="nav-link" data-scroll-target="#paso-5-enviar-evaluación"><span class="header-section-number">5.5</span> Paso 5: Enviar evaluación</a></li>
  </ul></li>
  <li><a href="#qué-sucede-con-los-datos" id="toc-qué-sucede-con-los-datos" class="nav-link" data-scroll-target="#qué-sucede-con-los-datos"><span class="header-section-number">6</span> ¿Qué sucede con los datos?</a></li>
  <li><a href="#buenas-prácticas-para-docentes" id="toc-buenas-prácticas-para-docentes" class="nav-link" data-scroll-target="#buenas-prácticas-para-docentes"><span class="header-section-number">7</span> Buenas prácticas para docentes</a></li>
  <li><a href="#evaluación-sumativa" id="toc-evaluación-sumativa" class="nav-link" data-scroll-target="#evaluación-sumativa"><span class="header-section-number">8</span> Evaluación sumativa</a></li>
  <li><a href="#preguntas-o-soporte" id="toc-preguntas-o-soporte" class="nav-link" data-scroll-target="#preguntas-o-soporte"><span class="header-section-number">9</span> ¿Preguntas o soporte?</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Guía para Docentes - Evaluación DOPS</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="introducción" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introducción</h1>
<p>Esta guía docente está diseñada para facilitar la enseñanza y evaluación de competencias clínicas en el entorno del trabajo. Se alinea con las recomendaciones del AMEE Guide No.&nbsp;31, que destaca la importancia de la observación directa, la retroalimentación formativa y la participación activa del estudiante en su propio proceso de aprendizaje.</p>
<hr>
</section>
<section id="evaluación-en-el-lugar-de-trabajo-wba" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Evaluación en el Lugar de Trabajo (WBA)</h1>
<p>Existen diversas herramientas de evaluación basadas en el lugar de trabajo (Workplace-Based Assessment, WBA) con un propósito principalmente formativo, permitiendo al estudiante recibir retroalimentación frecuente, específica y centrada en su desempeño.</p>
<section id="instrumentos-de-evaluación" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="instrumentos-de-evaluación"><span class="header-section-number">2.1</span> Instrumentos de evaluación</h2>
<section id="mini-cex" class="level3" data-number="2.1.1">
<h3 data-number="2.1.1" class="anchored" data-anchor-id="mini-cex"><span class="header-section-number">2.1.1</span> Mini-CEX:</h3>
<ul>
<li>Observación estructurada de encuentros clínicos breves.</li>
<li>Duración: 15 minutos + 5 minutos de retroalimentación.</li>
<li>Evaluaciones múltiples con diferentes docentes.</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/mini-CEX.png" class="img-fluid figure-img"></p>
<figcaption>Ejemplo de Mini-CEX</figcaption>
</figure>
</div>
</section>
<section id="dops-direct-observation-of-procedural-skills" class="level3" data-number="2.1.2">
<h3 data-number="2.1.2" class="anchored" data-anchor-id="dops-direct-observation-of-procedural-skills"><span class="header-section-number">2.1.2</span> DOPS (Direct Observation of Procedural Skills):</h3>
<ul>
<li>Observación directa de procedimientos (ej. canalización venosa, toma de muestras).</li>
<li>Uso de escala de 6 puntos.</li>
<li>Cada evaluación incluye retroalimentación estructurada.</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/dops.png" class="img-fluid figure-img"></p>
<figcaption>Ejemplo de DOPS</figcaption>
</figure>
</div>
</section>
<section id="discusión-de-casos-cbd" class="level3" data-number="2.1.3">
<h3 data-number="2.1.3" class="anchored" data-anchor-id="discusión-de-casos-cbd"><span class="header-section-number">2.1.3</span> Discusión de Casos (CbD):</h3>
<ul>
<li>Evaluación del razonamiento clínico mediante análisis de casos documentados.</li>
<li>Discusión de decisiones diagnósticas y terapéuticas.</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/CbD.png" class="img-fluid figure-img"></p>
<figcaption>Ejemplo de CbD</figcaption>
</figure>
</div>
<hr>
</section>
</section>
</section>
<section id="qué-es-dops" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> ¿Qué es DOPS?</h1>
<p>La Evaluación Directa de Habilidades Procedimentales (DOPS, por sus siglas en inglés) es un instrumento de evaluación en el lugar de trabajo (WPBA) diseñado para observar procedimientos clínicos reales, proveer retroalimentación inmediata y fomentar el aprendizaje reflexivo.</p>
<p>En nuestro curso de nefrología intervencionista, DOPS permite evaluar competencias técnicas como:</p>
<ul>
<li>Inserción de catéteres venosos (temporales y tunelizados)</li>
<li>Uso de fluoroscopia para posicionamiento preciso</li>
<li>Evaluación del estado de volumen con ultrasonido</li>
</ul>
<hr>
</section>
<section id="por-qué-usar-dops" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> ¿Por qué usar DOPS?</h1>
<p>DOPS ofrece:</p>
<p>✅ Evaluación en tiempo real y en contexto clínico real<br>
✅ Retroalimentación inmediata (5 minutos tras el procedimiento)<br>
✅ Fortalecimiento de la seguridad del paciente<br>
✅ Seguimiento longitudinal del progreso del estudiante<br>
✅ Datos para decisiones formativas y sumativas</p>
<hr>
</section>
<section id="cómo-realizar-una-evaluación-dops" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> ¿Cómo realizar una evaluación DOPS?</h1>
<section id="paso-1-accede-a-la-app" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="paso-1-accede-a-la-app"><span class="header-section-number">5.1</span> Paso 1: Accede a la app</h2>
<ul>
<li>Ingresa a: <a href="https://necardio.shinyapps.io/dops" class="uri">https://necardio.shinyapps.io/dops</a></li>
<li>Inicia sesión como evaluador (no requiere registro previo)</li>
</ul>
</section>
<section id="paso-2-selecciona-el-procedimiento-observado" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="paso-2-selecciona-el-procedimiento-observado"><span class="header-section-number">5.2</span> Paso 2: Selecciona el procedimiento observado</h2>
<ul>
<li>Ejemplos: CVC temporal, CVC tunelizado, ultrasonido de volumen</li>
</ul>
</section>
<section id="paso-3-evalúa-cada-dominio" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="paso-3-evalúa-cada-dominio"><span class="header-section-number">5.3</span> Paso 3: Evalúa cada dominio</h2>
<p>Para cada dominio, selecciona una de las siguientes opciones:</p>
<ul>
<li>🔴 Por debajo de lo esperado<br>
</li>
<li>🟡 En el límite<br>
</li>
<li>🟢 Cumple con lo esperado<br>
</li>
<li>🟢🔵 Por encima de lo esperado<br>
</li>
<li>⚪️ No aplica / No observado</li>
</ul>
<p><strong>Dominios evaluados:</strong> - Técnica estéril - Habilidad técnica - Profesionalismo - Comunicación - Control de aguja y posicionamiento del catéter (según procedimiento)</p>
</section>
<section id="paso-4-escribe-observaciones" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="paso-4-escribe-observaciones"><span class="header-section-number">5.4</span> Paso 4: Escribe observaciones</h2>
<p>Incluye un comentario breve que:</p>
<ul>
<li>Refuerce lo que hizo bien</li>
<li>Señale un aspecto a mejorar</li>
<li>Sugiera una acción concreta</li>
</ul>
</section>
<section id="paso-5-enviar-evaluación" class="level2" data-number="5.5">
<h2 data-number="5.5" class="anchored" data-anchor-id="paso-5-enviar-evaluación"><span class="header-section-number">5.5</span> Paso 5: Enviar evaluación</h2>
<p>Presiona “Enviar evaluación”. El sistema guardará la entrada con sello de tiempo en la base de datos.</p>
<hr>
</section>
</section>
<section id="qué-sucede-con-los-datos" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> ¿Qué sucede con los datos?</h1>
<ul>
<li>Todas las evaluaciones son almacenadas en Supabase.</li>
<li>Se pueden generar reportes individuales para analizar el progreso.</li>
<li>En evaluaciones sumativas, deben realizarse <strong>al menos 3 DOPS por procedimiento</strong>, con distintos evaluadores.</li>
</ul>
<hr>
</section>
<section id="buenas-prácticas-para-docentes" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Buenas prácticas para docentes</h1>
<p>🧠 <strong>Sé observador:</strong> Evalúa habilidades técnicas, pero también comunicación y toma de decisiones.<br>
🗣️ <strong>Provee retroalimentación inmediata:</strong> Usa el modelo “lo que hizo bien / qué puede mejorar / cómo hacerlo”.<br>
📅 <strong>Sé constante:</strong> Evalúa frecuentemente, incluso varias veces por semana.<br>
👥 <strong>Promueve la autoevaluación y la coevaluación entre pares.</strong><br>
📊 <strong>Consulta los reportes de análisis para guiar tutorías individuales.</strong></p>
<hr>
</section>
<section id="evaluación-sumativa" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Evaluación sumativa</h1>
<p>Para que una DOPS cuente como parte de la evaluación sumativa:</p>
<ul>
<li>Debe ser realizada por un docente diferente al tutor principal.</li>
<li>Deben existir al menos 3 observaciones independientes por procedimiento.</li>
<li>Los resultados serán analizados para calcular confiabilidad interevaluador (ICC).</li>
<li>El criterio final de competencia debe basarse en datos agregados, no en una sola observación.</li>
</ul>
<hr>
</section>
<section id="preguntas-o-soporte" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> ¿Preguntas o soporte?</h1>
<p>Si tienes dudas sobre cómo usar la herramienta o interpretar resultados:</p>
<p>📧 Contacta a: <a href="mailto:juan.castellanos@urosario.edu.co">juan.castellanos@urosario.edu.co</a><br>
🔗 Accede al repositorio: <a href="https://github.com/JC4st/dops-project">github.com/JC4st/dops-project</a></p>
<hr>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copiado");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copiado");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>